

# virtualenv
* Windows
```bash
    python -m virtualenv <virtual_name>

    .\\django\Scripts\activate 
```

# django
## settings.py
* > django 3.1:
  ```
  BASE_DIR = Path(__file__).resolve().parent.parent
  STATIC_ROOT = BASE_DIR/'static'
  ```

## start django project
* install django first
```bash
    #powershell
    django-admin startproject <project_name>

    # inside the project directory
    python manage.py runserver
```

## MVT
* model view template
  * model: define the data for your application and abstraction layer
  * view: the logic for your application 
  * template: HTML files

## Structure of directories
### Django Project
|   Files   | Meaning               |
|:---------:|:----------------------|
| manage.py | manage django project |

#### manage.py
* ``python3 manage.py <code>``

|      Code      | Meaning                                                                                                       | Example               |
|:--------------:|:--------------------------------------------------------------------------------------------------------------|:----------------------|
|   runserver    | start the HTTP server. Automatically restart in the terminal when scripts change. Except for database changes | runserver (host:)port |
|    startapp    | create a new Django app                                                                                       |
|     shell      | start a Python interpreter                                                                                    |
|    dbshell     | start an interactive shell connected to database                                                              |
| makemigrations | generate database change instructions from model definitions                                                  |
|    migrate     | apply migrations generated by the makemigrations                                                              |
|      test      | run automated tests                                                                                           |

#### <project> directory
* next to ``manage.py``

|    File     | Meaning                     |
|:-----------:|:----------------------------|
| __init__.py | indicate python module      |
|   urls.py   | global URL mappings         |
| settings.py | django settings             |
|   asgi.py   | communicate with Django App |
|   wsgi.py   | communicate with Django App |

##### Settings.py
* global variables
> Do not use/import self-created settings file. Use **django.conf** or settings will be affected by
> 1. other different settings.py file
> 2. Hidden settings of Django
> 3. Third-party libraries settings

> if one setting variable is missing, the value will fall back to the default value of Django
> 
> If using self-created settings files, the value will not fall back

|    variable    | Meaning                                                                                  |
|:--------------:|:-----------------------------------------------------------------------------------------|
|   SECRET_KEY   | for hashing, tokens, cryptographic functions                                             |
|     DEBUG      | True: automatically display exceptions to browser. If production, it should be set False |
| INSTALLED_APPS | Django third-party apps                                                                  |
|  ROOT_URLCONF  | Django loads first to find URLs. index view URL map                                      |
|   TEMPLATES    ||
|    APP_DIRS    | look in a templates directory inside each INSTALLED_APP when loading templates           |




### django app
|    File     | Meaning                                                                    |
|:-----------:|:---------------------------------------------------------------------------|
| __init__.py | indicate python module                                                     |
|  admin.py   | built-admin site for viewing and edition data with GUI                     |
|   apps.py   | configuration for the metadata of app                                      |
|  models.py  | define the models for applications                                         |
| migrations  | automatically record changes to database. generated when running manage.py | 
|  tests.py   | test code                                                                  |
|  views.py   | django views                                                               |


## QueryDict Object
* immutable
  * require `copy` to edit the object
```python
qd = QueryDict('k=a&k=b&k=c')
qd['k'] # c
qd.get('k') #c
qd.getlist('k') # ['a', 'b', 'c']
qd.getlist('g') # []
```

```python
qd2 = qd.copy()
qd2['k'] = 'd'
qd2['k'] # change c -> d  
```
> Note: 
>
> name = request.GET.get('name', 'world') => empty value if name=""
> use name = request.GET.get('name') or 'world'

## Functions

### Render
* a shortcut function that returns an HttpResponse instance
* two arguments
  * request
  * name/relative path of the template being rendered
  * (optional) render context containing variables available in the template

# HTTP status
| Status  | Meaning                                           |
|:-------:|:--------------------------------------------------|
| 100-199 | protocol changes, more data is requires. No worry |
| 200-299 | successful                                        |
| 300-399 | redirect response                                 |
| 400-499 | error on client side                              |
| 500-599 | error on server side                              |